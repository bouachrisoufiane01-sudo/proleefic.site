<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proleefic | Morocco Job Board</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3965710509874164" crossorigin="anonymous"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Inter', 'sans-serif'],
                        arabic: ['Cairo', 'sans-serif'] 
                    },
                    colors: { 
                        morocco: { 
                            red: '#C1272D', // Flag Red
                            green: '#006233', // Flag Green
                            darkRed: '#A01E23',
                            lightGreen: '#E6F4EA'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        * { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background-color: #F9FAFB; }
        [dir="rtl"] body { font-family: 'Cairo', sans-serif; }
        
        .modal { display: none; opacity: 0; transition: opacity 0.2s ease; backdrop-filter: blur(4px); }
        .modal.active { display: flex; opacity: 1; }
        .fade-in { animation: fadeInUp 0.4s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #C1272D; border-radius: 4px; }
    </style>
</head>
<body class="text-gray-800">

    <nav class="bg-morocco-red text-white shadow-lg sticky top-0 z-40 border-b-4 border-morocco-green">
        <div class="container mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2 cursor-pointer" onclick="window.location.reload()">
                <div class="bg-white w-10 h-10 rounded-full flex items-center justify-center shadow-md">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L14.5 9H22L16 13.5L18.5 21L12 16.5L5.5 21L8 13.5L2 9H9.5L12 2Z" fill="#006233" stroke="#006233" stroke-width="1.5" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span class="text-2xl font-bold tracking-tight">Proleefic<span class="text-white opacity-80 text-sm ml-1 font-normal">.ma</span></span>
            </div>
            
            <div class="flex items-center gap-3">
                <div class="flex bg-red-800 rounded-lg p-1">
                    <button onclick="setLanguage('en')" class="lang-btn px-3 py-1 text-xs font-bold rounded hover:bg-white/10 transition" id="btn-en">EN</button>
                    <button onclick="setLanguage('fr')" class="lang-btn px-3 py-1 text-xs font-bold rounded hover:bg-white/10 transition" id="btn-fr">FR</button>
                    <button onclick="setLanguage('ar')" class="lang-btn px-3 py-1 text-xs font-bold rounded hover:bg-white/10 transition" id="btn-ar">Ø¹Ø±Ø¨ÙŠ</button>
                </div>
            </div>
        </div>
    </nav>

    <header class="bg-white py-12 px-4 border-b border-gray-200">
        <div class="container mx-auto max-w-4xl text-center">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4 tracking-tight">
                <span data-i18n="heroTitle">Find your dream job in</span> <span class="text-morocco-red">Morocco ğŸ‡²ğŸ‡¦</span>
            </h1>
            <p class="text-lg text-gray-500 mb-8" data-i18n="heroSub">Aggregating opportunities from Emploi.ma, Rekrute, and LinkedIn.</p>
            
            <div class="bg-white p-2 rounded-2xl shadow-xl border border-gray-200 flex flex-col md:flex-row gap-2 max-w-4xl mx-auto ring-4 ring-morocco-green/10">
                <div class="flex-[2] flex items-center px-4 h-14 border-b md:border-b-0 md:border-r border-gray-100">
                    <span class="text-morocco-green text-xl mx-2">ğŸ”</span>
                    <input type="text" id="searchInput" placeholder="Job title, company..." class="w-full outline-none text-gray-800 placeholder-gray-400 bg-transparent text-lg">
                </div>
                <div class="flex-1 flex items-center px-4 h-14 border-b md:border-b-0 border-gray-100">
                    <span class="text-morocco-green text-xl mx-2">ğŸ“</span>
                    <select id="locationFilter" class="w-full outline-none text-gray-800 bg-transparent cursor-pointer text-lg"></select>
                </div>
                <button onclick="filter()" class="bg-morocco-green hover:bg-green-800 text-white px-8 h-14 rounded-xl font-bold text-lg transition shadow-lg" data-i18n="searchBtn">Search</button>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-4 gap-8">
        
        <div class="hidden lg:block space-y-6">
            <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm sticky top-24">
                <h3 class="font-bold text-morocco-red text-lg mb-4 border-b pb-2" data-i18n="categories">Categories</h3>
                <div id="categoryList" class="space-y-1 max-h-[70vh] overflow-y-auto pr-2"></div>
            </div>
            
            <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm text-center">
                <span class="text-[10px] text-gray-300 uppercase mb-2 block">Advertisement</span>
                <ins class="adsbygoogle" style="display:block; width:100%" data-ad-client="ca-pub-3965710509874164" data-ad-slot="1234567890" data-ad-format="auto" data-full-width-responsive="true"></ins>
                <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
            </div>
        </div>

        <div class="lg:col-span-3">
            <div class="flex flex-col md:flex-row justify-between items-center mb-4 gap-4">
                <h2 class="font-bold text-2xl text-gray-800 flex items-center gap-2">
                    <span class="text-morocco-green text-3xl">â€¢</span> 
                    <span id="jobCount">Latest Jobs</span>
                </h2>
                <div class="flex gap-2 w-full md:w-auto">
                    <select id="categoryFilter" class="lg:hidden flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm bg-white"></select>
                </div>
            </div>

            <div id="loadingScreen" class="flex flex-col items-center justify-center py-20 bg-white rounded-xl border border-gray-200 shadow-sm">
                <div class="animate-spin rounded-full h-12 w-12 border-b-4 border-morocco-red mb-4"></div>
                <p class="text-gray-500 font-medium" data-i18n="loading">Scanning job boards...</p>
            </div>

            <div id="jobListings" class="space-y-4"></div>

            <div class="mt-8 text-center">
                <button onclick="refreshJobs()" class="bg-white border-2 border-morocco-red text-morocco-red font-bold py-3 px-8 rounded-full hover:bg-morocco-red hover:text-white transition shadow-md flex items-center justify-center gap-2 mx-auto">
                    <span>ğŸ”„ <span data-i18n="loadMore">Load More Jobs</span></span>
                </button>
            </div>
        </div>
    </div>

    <div id="jobModal" class="modal fixed inset-0 bg-black/60 z-50 items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto relative flex flex-col">
            <div class="sticky top-0 bg-white border-b border-gray-100 p-6 z-10 flex justify-between items-start">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900" id="modalTitle"></h2>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="font-semibold text-morocco-red" id="modalCompany"></span>
                        <span class="text-gray-300">|</span>
                        <span class="text-sm text-gray-500" id="modalLocation"></span>
                    </div>
                </div>
                <button onclick="closeModal()" class="bg-gray-100 hover:bg-morocco-red hover:text-white p-2 rounded-full transition h-10 w-10 flex items-center justify-center text-xl font-bold">âœ•</button>
            </div>
            <div class="p-6">
                <div class="flex flex-wrap gap-2 mb-6" id="modalTags"></div>
                <div class="prose max-w-none">
                    <h3 class="text-lg font-bold mb-2 text-gray-800" data-i18n="aboutRole">About the role</h3>
                    <p class="text-gray-600 leading-relaxed mb-6" id="modalDescription"></p>
                    <h3 class="text-lg font-bold mb-2 text-gray-800" data-i18n="requirements">Requirements</h3>
                    <ul class="space-y-2 mb-6" id="modalRequirements"></ul>
                </div>
                
                <div class="my-4 text-center">
                    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3965710509874164" data-ad-slot="1234567891" data-ad-format="horizontal" data-full-width-responsive="true"></ins>
                    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                </div>

                <div class="mt-4 pt-4 border-t border-gray-100">
                     <a id="modalApplyBtn" href="#" target="_blank" class="block w-full bg-morocco-green hover:bg-green-800 text-white py-4 rounded-xl font-bold text-center transition shadow-lg transform hover:scale-[1.02] text-lg">
                        <span data-i18n="apply">Apply Now on Source</span> â†—
                     </a>
                     <p class="text-center text-xs text-gray-400 mt-2">You will be redirected to <span id="modalSource"></span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- GLOBAL STATE ---
        let currentLang = 'en';
        let jobs = [];
        let filtered = [];
        
        // --- TRANSLATIONS ---
        const i18n = {
            en: {
                heroTitle: "Find your dream job in",
                heroSub: "Aggregating thousands of opportunities from Emploi.ma, Rekrute, and LinkedIn.",
                searchPlaceholder: "Job title, company, keyword...",
                searchBtn: "Search Jobs",
                categories: "Job Categories",
                updated: "Updated",
                loadMore: "Load More Jobs",
                loading: "Searching all Moroccan job boards...",
                aboutRole: "Job Description",
                requirements: "Requirements",
                apply: "Apply Now",
                posted: "ago",
                allLocs: "ğŸ“ All Cities",
                allCats: "ğŸ“‚ All Categories",
                viewDetails: "View Details",
                directApply: "Apply",
                currency: "MAD"
            },
            fr: {
                heroTitle: "Trouvez le job de vos rÃªves au",
                heroSub: "Regroupement d'offres de Emploi.ma, Rekrute et LinkedIn.",
                searchPlaceholder: "Titre, entreprise, mot-clÃ©...",
                searchBtn: "Rechercher",
                categories: "CatÃ©gories",
                updated: "Mis Ã  jour",
                loadMore: "Charger plus",
                loading: "Recherche sur les sites d'emploi...",
                aboutRole: "Description du poste",
                requirements: "PrÃ©requis",
                apply: "Postuler Maintenant",
                posted: "il y a",
                allLocs: "ğŸ“ Toutes les villes",
                allCats: "ğŸ“‚ Toutes les catÃ©gories",
                viewDetails: "Voir DÃ©tails",
                directApply: "Postuler",
                currency: "MAD"
            },
            ar: {
                heroTitle: "Ø¬Ø¯ ÙˆØ¸ÙŠÙØ© Ø£Ø­Ù„Ø§Ù…Ùƒ ÙÙŠ",
                heroSub: "ØªØ¬Ù…ÙŠØ¹ Ø§Ù„ÙØ±Øµ Ù…Ù† Emploi.ma Ùˆ Rekrute Ùˆ LinkedIn.",
                searchPlaceholder: "Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠØŒ Ø§Ù„Ø´Ø±ÙƒØ©...",
                searchBtn: "Ø¨Ø­Ø«",
                categories: "ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„ÙˆØ¸Ø§Ø¦Ù",
                updated: "ØªØ­Ø¯ÙŠØ«",
                loadMore: "ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯",
                loading: "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…ØºØ±Ø¨ÙŠØ©...",
                aboutRole: "ÙˆØµÙ Ø§Ù„ÙˆØ¸ÙŠÙØ©",
                requirements: "Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª",
                apply: "Ù‚Ø¯Ù‘Ù… Ø§Ù„Ø¢Ù†",
                posted: "Ù…Ù†Ø°",
                allLocs: "ğŸ“ ÙƒÙ„ Ø§Ù„Ù…Ø¯Ù†",
                allCats: "ğŸ“‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª",
                viewDetails: "Ø§Ù„ØªÙØ§ØµÙŠÙ„",
                directApply: "ØªÙ‚Ø¯ÙŠÙ…",
                currency: "Ø¯Ø±Ù‡Ù…"
            }
        };

        // --- DATA POOLS ---
        const cities = [
            "Casablanca", "Rabat", "Tangier", "Marrakech", "Agadir", "Fes", "Meknes", 
            "Oujda", "Kenitra", "Tetouan", "Safi", "Mohammedia", "El Jadida", 
            "Beni Mellal", "Nador", "Settat", "Berrechid", "Laayoune", "Dakhla", "Remote"
        ];

        const jobCategories = [
            "IT & Development", "Sales & Business Dev", "Accounting & Finance", 
            "Marketing & Digital", "Engineering & Industry", "Call Center & Customer Service", 
            "Healthcare & Pharma", "Education & Teaching", "Tourism & Hospitality", 
            "Supply Chain & Logistics", "HR & Legal", "Construction & Civil Eng"
        ];

        // --- LOGIC ---

        function setLanguage(lang) {
            currentLang = lang;
            const dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.documentElement.setAttribute('dir', dir);
            document.documentElement.setAttribute('lang', lang);
            
            // Toggle Button Styles
            document.querySelectorAll('.lang-btn').forEach(b => {
                b.classList.remove('bg-white', 'text-morocco-red');
                b.classList.add('text-white');
            });
            const activeBtn = document.getElementById('btn-' + lang);
            activeBtn.classList.remove('text-white');
            activeBtn.classList.add('bg-white', 'text-morocco-red');

            // Update Text
            document.querySelectorAll('[data-i18n]').forEach(el => {
                el.innerText = i18n[lang][el.getAttribute('data-i18n')];
            });
            document.getElementById('searchInput').placeholder = i18n[lang].searchPlaceholder;
            
            // Reload Data
            fetchJobs();
        }

        function fetchJobs() {
            document.getElementById('loadingScreen').style.display = 'flex';
            document.getElementById('jobListings').innerHTML = '';
            
            // Simulate Network Request
            setTimeout(() => {
                jobs = generateMockJobs(currentLang);
                initFilters();
                filter(); // Applies current filters to new data
                document.getElementById('loadingScreen').style.display = 'none';
            }, 600);
        }

        function generateMockJobs(lang) {
            const titles = {
                en: ['Full Stack Developer', 'Sales Representative', 'Accountant', 'Digital Marketer', 'HR Specialist', 'Civil Engineer', 'Call Center Agent', 'French Teacher', 'Hotel Manager', 'Logistics Coordinator'],
                fr: ['DÃ©veloppeur Full Stack', 'Commercial Terrain', 'Comptable Senior', 'Chef de Projet Digital', 'ChargÃ© RH', 'IngÃ©nieur GÃ©nie Civil', 'Conseiller Client', 'Professeur de FranÃ§ais', 'Directeur d\'HÃ´tel', 'Coordinateur Logistique'],
                ar: ['Ù…Ø·ÙˆØ± Ø¨Ø±Ù…Ø¬ÙŠØ§Øª', 'Ù…Ù…Ø«Ù„ Ù…Ø¨ÙŠØ¹Ø§Øª', 'Ù…Ø­Ø§Ø³Ø¨', 'Ù…Ø³ÙˆÙ‚ Ø±Ù‚Ù…ÙŠ', 'Ø£Ø®ØµØ§Ø¦ÙŠ Ù…ÙˆØ§Ø±Ø¯ Ø¨Ø´Ø±ÙŠØ©', 'Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø¯Ù†ÙŠ', 'ÙˆÙƒÙŠÙ„ Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡', 'Ù…Ø¯Ø±Ø³ Ù„ØºØ© ÙØ±Ù†Ø³ÙŠØ©', 'Ù…Ø¯ÙŠØ± ÙÙ†Ø¯Ù‚', 'Ù…Ù†Ø³Ù‚ Ù„ÙˆØ¬Ø³ØªÙŠ']
            };
            
            const companies = ['OCP Group', 'Attijariwafa Bank', 'Maroc Telecom', 'Inwi', 'Bank of Africa', 'Dell Morocco', 'Oracle', 'Yazaki', 'Renault Group', 'Royal Air Maroc'];
            
            // Real URL structures (Placeholders for demo)
            const sources = [
                {name: 'LinkedIn', url: 'https://www.linkedin.com/jobs/search/?location=Morocco'}, 
                {name: 'Rekrute', url: 'https://www.rekrute.com/offres.html'}, 
                {name: 'Emploi.ma', url: 'https://www.emploi.ma/recherche-jobs-maroc'},
                {name: 'Anapec', url: 'http://www.anapec.org/'}
            ];

            let arr = [];
            for (let i = 0; i < 40; i++) {
                let tList = titles[lang] || titles['en'];
                let title = tList[Math.floor(Math.random() * tList.length)];
                let src = sources[Math.floor(Math.random() * sources.length)];
                
                arr.push({
                    id: i,
                    title: title,
                    company: companies[Math.floor(Math.random() * companies.length)],
                    location: cities[Math.floor(Math.random() * cities.length)],
                    salary: (Math.floor(Math.random() * 10) + 4) + ',000 ' + i18n[lang].currency,
                    category: jobCategories[Math.floor(Math.random() * jobCategories.length)],
                    posted: (Math.floor(Math.random() * 7) + 1) + 'd',
                    description: lang === 'ar' ? "Ù†Ø¨Ø­Ø« Ø¹Ù† Ù…Ø±Ø´Ø­ Ù…Ø¤Ù‡Ù„ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ ÙØ±ÙŠÙ‚Ù†Ø§. Ø§Ù†Ù‚Ø± ÙÙˆÙ‚ ØªÙ‚Ø¯ÙŠÙ… Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯." : "We are looking for a qualified candidate to join our team. Click apply to read the full details on the source website.",
                    requirements: lang === 'ar' ? ['Ø®Ø¨Ø±Ø© Ø³Ù†ØªÙŠÙ†', 'Ù„ØºØ© ÙØ±Ù†Ø³ÙŠØ©', 'Ù…Ù‡Ø§Ø±Ø§Øª ØªÙˆØ§ØµÙ„'] : ['2+ Years Experience', 'French & English', 'Communication Skills'],
                    source: src,
                    applyUrl: src.url // The direct link
                });
            }
            return arr;
        }

        function initFilters() {
            const lf = document.getElementById('locationFilter');
            const cf = document.getElementById('categoryFilter');
            const cl = document.getElementById('categoryList');
            
            // Preserve selected values if refreshing
            const selLoc = lf.value;
            const selCat = cf.value;

            lf.innerHTML = `<option value="">${i18n[currentLang].allLocs}</option>`;
            cities.sort().forEach(l => lf.innerHTML += `<option value="${l}">${l}</option>`);
            if(selLoc) lf.value = selLoc;

            cf.innerHTML = `<option value="">${i18n[currentLang].allCats}</option>`;
            jobCategories.sort().forEach(c => cf.innerHTML += `<option value="${c}">${c}</option>`);
            if(selCat) cf.value = selCat;

            cl.innerHTML = `<button onclick="setCat('')" class="block w-full px-3 py-2 rounded-lg text-sm font-medium bg-morocco-lightGreen text-morocco-green ${currentLang === 'ar' ? 'text-right' : 'text-left'}">${i18n[currentLang].allCats}</button>`;
            jobCategories.sort().forEach(c => {
                cl.innerHTML += `<button onclick="setCat('${c}')" class="block w-full px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-morocco-red transition ${currentLang === 'ar' ? 'text-right' : 'text-left'}">${c}</button>`;
            });
        }

        function setCat(cat) {
            document.getElementById('categoryFilter').value = cat;
            filter();
        }

        function filter() {
            const s = document.getElementById('searchInput').value.toLowerCase();
            const l = document.getElementById('locationFilter').value;
            const c = document.getElementById('categoryFilter').value;
            
            filtered = jobs.filter(j => {
                const matchSearch = j.title.toLowerCase().includes(s) || j.company.toLowerCase().includes(s);
                const matchLoc = l === '' || j.location === l;
                const matchCat = c === '' || j.category === c;
                return matchSearch && matchLoc && matchCat;
            });
            
            render(filtered);
        }

        function render(arr) {
            const container = document.getElementById('jobListings');
            document.getElementById('jobCount').innerText = arr.length + (currentLang === 'ar' ? ' ÙˆØ¸Ø§Ø¦Ù' : ' Jobs Found');
            
            if(arr.length === 0) {
                container.innerHTML = `<div class="text-center py-12"><div class="text-4xl mb-2">ğŸª</div><p class="text-gray-500">No jobs found. Try a different city.</p></div>`;
                return;
            }

            let html = '';
            arr.forEach((j, index) => {
                // Letter Logo Color Logic
                const colors = ['bg-red-100 text-morocco-red', 'bg-green-100 text-morocco-green', 'bg-blue-100 text-blue-600'];
                const colorClass = colors[index % 3];

                html += `
                <div class="group bg-white p-5 rounded-xl border border-gray-200 hover:border-morocco-green hover:shadow-lg transition-all duration-300 fade-in relative">
                    <div class="flex gap-4 items-start cursor-pointer" onclick="openModal(${j.id})">
                        <div class="h-14 w-14 rounded-xl flex items-center justify-center font-bold text-xl shrink-0 ${colorClass} shadow-inner">
                            ${j.company.charAt(0)}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-lg text-gray-900 group-hover:text-morocco-red transition">${j.title}</h3>
                            <p class="text-sm text-gray-500 font-medium">${j.company}</p>
                            <div class="flex items-center gap-2 mt-2 text-xs text-gray-500">
                                <span class="flex items-center gap-1"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> ${j.location}</span>
                                <span>â€¢</span>
                                <span class="text-morocco-green font-bold">${j.salary}</span>
                                <span>â€¢</span>
                                <span>${j.posted} ${i18n[currentLang].posted}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 flex gap-3 pt-4 border-t border-gray-100">
                        <button onclick="openModal(${j.id})" class="flex-1 py-2 rounded-lg text-sm font-medium text-gray-600 bg-gray-50 hover:bg-gray-100 transition">
                            ${i18n[currentLang].viewDetails}
                        </button>
                        <a href="${j.applyUrl}" target="_blank" class="flex-1 py-2 rounded-lg text-sm font-bold text-white bg-morocco-green hover:bg-green-800 transition text-center shadow-sm">
                            ${i18n[currentLang].directApply} â†—
                        </a>
                    </div>
                    
                    <span class="absolute top-4 right-4 text-[10px] font-semibold text-gray-300 border border-gray-100 px-2 py-1 rounded-full">
                        ${j.source.name}
                    </span>
                </div>`;

                // In-Feed Ad every 6 items
                if ((index + 1) % 6 === 0 && index !== arr.length - 1) {
                    html += `<div class="bg-white p-4 rounded-xl border border-gray-200 text-center shadow-sm"><span class="text-[10px] text-gray-300 uppercase mb-2 block">Sponsored</span><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-3965710509874164" data-ad-slot="1234567892"></ins></div><script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script>`;
                }
            });
            container.innerHTML = html;
        }

        function openModal(id) {
            const j = jobs.find(x => x.id === id);
            if(!j) return;

            document.getElementById('modalTitle').innerText = j.title;
            document.getElementById('modalCompany').innerText = j.company;
            document.getElementById('modalLocation').innerText = j.location;
            document.getElementById('modalDescription').innerText = j.description;
            document.getElementById('modalSource').innerText = j.source.name;
            document.getElementById('modalApplyBtn').href = j.applyUrl;

            const tags = [
                {text: j.salary, color: 'bg-morocco-lightGreen text-morocco-green'}, 
                {text: j.category, color: 'bg-red-50 text-morocco-red'}
            ];
            document.getElementById('modalTags').innerHTML = tags.map(t => `<span class="${t.color} px-3 py-1.5 rounded-full text-xs font-bold shadow-sm">${t.text}</span>`).join('');
            document.getElementById('modalRequirements').innerHTML = j.requirements.map(r => `<li class="flex gap-2 items-center"><span class="text-morocco-green font-bold">âœ“</span> ${r}</li>`).join('');
            
            document.getElementById('jobModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('jobModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function refreshJobs() { fetchJobs(); }

        // Init
        window.onload = function() {
            setLanguage('en');
            document.getElementById('searchInput').addEventListener('input', filter);
            document.getElementById('locationFilter').addEventListener('change', filter);
            document.getElementById('categoryFilter').addEventListener('change', filter);
            document.getElementById('jobModal').addEventListener('click', (e) => { if(e.target.id === 'jobModal') closeModal(); });
        };
    </script>
</body>
</html>
